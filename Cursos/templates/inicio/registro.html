{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <!-- Configuración básica del documento -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        {{ title }}
      {% endblock %}
    </title>
    <link rel="stylesheet" href="{% static 'css/index-styles.css' %}" />
  </head>
  <body>
    <!-- Contenedor principal de la aplicación -->
    <div class="contenedor-principal">
      <!-- Encabezado de la página -->
      <header class="encabezado">
        <!-- Logo del SENA -->
        <div class="logo-contenedor">
          <img src="{% static 'img/Sena.png' %}" alt="Logo SENA" class="logo" />
          <h1 class="titulo-principal">Sistema de Gestión SENA</h1>
        </div>
      </header>
      <!-- Sección principal - Formulario de inicio de sesión -->
      <main class="contenido-principal">
          {% if messages %}
            <div class="alertas">
              {% for message in messages %}
                <div class="alert {% if 'error' in message.tags %}alert-error{% else %}alert-success{% endif %}">
                  {{ message }}
                </div>
              {% endfor %}
            </div>
          {% endif %}
          {{error}}
        <!-- Contenedor del formulario de login -->
        <div class="formulario-contenedor">
          <!-- Título del formulario -->
          <h2 class="titulo-formulario">Registro personal SENA</h2>

          <!-- Formulario de autenticación -->
            
          <!-- Cambia esta línea -->
          <form class="formulario-login" method="POST" action="{% url 'registro' %}">
            {% csrf_token %}

            <!-- Campo para número de cédula -->
            <div class="campo-entrada">
              <label for="numeroCedula" class="etiqueta-campo">Nombres*:</label>
              <input type="text" id="nombre" name="nombre" class="entrada-texto" placeholder="Ingrese su número de cédula" required />
            </div>

            <!-- Campo para número de cédula -->
            <div class="campo-entrada">
              <label for="numeroCedula" class="etiqueta-campo">Apellidos*:</label>
              <input type="text" id="apellido" name="apellido" class="entrada-texto" placeholder="Ingrese su apellido" required />
            </div>
            <!-- Selector de tipo de usuario -->
            <div class="campo-entrada">
              <label for="rol" class="etiqueta-campo">Rol*:</label>
              <select id="rol" name="rol" class="selector-usuario" required>
                <option value="">Seleccione su rol</option>
                <option value="1">Instructor</option>
                <option value="2">Coordinador</option>
                <option value="3">Funcionario</option>
                <option value="4">Administrador</option>
                <option value="5">Curricular</option>
              </select>
            </div>
            <!-- Campo para el tipo de identificación -->
            <div class="campo-entrada">
            <label for="tipo_documento" class="etiqueta-campo">Tipos documento *</label>
            <select id="tipo_documento" name="tipo_documento" class="selector-usuario" required>
                <option value="">Seleccione una opción</option>
                {% for tipo_identificacion in tipos_identificacion  %}
                <option value="{{tipo_identificacion.idtipoidentificacion}}">{{tipo_identificacion.tipoidentificacion}}</option>
                {% endfor %}
            </select>
            </div>

            <!-- Campo para número de cédula -->
            <div class="campo-entrada">
              <label for="numeroCedula" class="etiqueta-campo">Número de Cédula*:</label>
              <input type="text" id="numeroCedula" name="numeroCedula" class="entrada-texto" placeholder="Ingrese su número de cédula" required />
            </div>

            <!-- Campo para número de cédula -->
            <div class="campo-entrada">
              <label for="numeroCedula" class="etiqueta-campo">Correo*:</label>
              <input type="email" id="correo" name="correo" class="entrada-texto" placeholder="Ingrese su correo electronico" required />
            </div>

            <!-- Campo para contraseña -->
            <div class="campo-entrada">
              <label for="clave" class="etiqueta-campo">Contraseña*:</label>
              <input type="password" id="clave" name="clave" class="entrada-texto" placeholder="Ingrese su contraseña" required />
              <span>La contraseña debe tener minimo 8 caracteres</span>
            </div>

            {% comment %} Tipo de contrato {% endcomment %}
            <div class="campo-entrada">
              <label for="rol" class="etiqueta-campo">Tipo de contrato*:</label>
              <select id="contrato" name="contrato" class="selector-usuario" required onchange="mostrarNumeroContrato()">
                <option value="">Seleccione una opción</option>
                <option value="1">Planta</option>
                <option value="2">Contrato</option>
              </select>
            </div>

            <!-- Campo para número de contrato (oculto por defecto) -->
            <div class="campo-entrada" id="numero-contrato-contenedor" style="display: none;">
              <label for="numeroContrato" class="etiqueta-campo">Número de Contrato*:</label>
              <input type="text" id="numeroContrato" name="numeroContrato" class="entrada-texto" placeholder="Ingrese el número de contrato" />
            </div>

            <!-- Botón de inicio de sesión -->
            <input type="submit" class="boton-ingresar" value="Registrarse"/>
            <p class="center-link">¿Ya estás registrado?<a href="{% url 'login' %}" class="linkLogin"> Iniciar Sesión</a></p>

            <script>
              function mostrarNumeroContrato() {
                const contrato = document.getElementById('contrato').value;
                const contenedor = document.getElementById('numero-contrato-contenedor');
                const input = document.getElementById('numeroContrato');
                
                if (contrato === '2') {
                  contenedor.style.display = 'block';
                  input.required = true;
                } else {
                  contenedor.style.display = 'none';
                  input.required = false;
                  input.value = '';
                }
              }
            </script>
          </form>
      </main>
    </div>
  </body>
</html>